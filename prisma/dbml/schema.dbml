//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table Account {
  id Bytes [pk]
  email String [unique, not null]
  name String
  password String [not null]
  role Role [not null, default: 'Customer']
  Customer Customer
  Admin Admin
  Comment Comment [not null]
  Sender Chat [not null]
  Receiver Chat [not null]
}

Table Customer {
  accountId Bytes [pk]
  Account Account [not null]
  Payment Payment [not null]
  Order Order [not null]
}

Table Admin {
  accountId Bytes [pk]
  Account Account [not null]
}

Table LaptopModel {
  id Bytes [pk]
  name String [not null]
  brand String [not null]
  cpu String [not null]
  ram String [not null]
  storage String [not null]
  display String [not null]
  color Color [not null]
  price Decimal [not null]
  description String [not null]
  Comment Comment [not null]
  Laptop Laptop [not null]
  LaptopModelOnImage LaptopModelOnImage [not null]
}

Table Laptop {
  macId Bytes [pk]
  MFG DateTime [not null]
  modelId Bytes [not null]
  status LaptopStatus [not null, default: 'Available']
  LaptopModel LaptopModel [not null]
}

Table Order {
  id Bytes [pk]
  customerId Bytes [not null]
  status OrderStatus [not null, default: 'Pending']
  OrderDetail OrderDetail [not null]
  Payment Payment
  Customer Customer [not null]
}

Table OrderDetail {
  id Bytes [pk]
  orderId Bytes [not null]
  laptopId Bytes [not null]
  amount Int [not null]
  price Decimal [not null]
  Order Order [not null]
}

Table Payment {
  id Bytes [pk]
  customerId Bytes [not null]
  orderId Bytes [unique, not null]
  type PaymentType [not null]
  status PaymentStatus [not null]
  paymentMethodId Bytes
  Order Order [not null]
  Customer Customer [not null]
  PaymentMethod PaymentMethod
}

Table PaymentMethod {
  id Bytes [pk]
  data Json [not null]
  type PaymentType [not null]
  Payment Payment [not null]
}

Table LaptopModelOnImage {
  laptopModelId Bytes [not null]
  imageId Bytes [not null]
  LaptopModel LaptopModel [not null]
  Image Image [not null]

  indexes {
    (laptopModelId, imageId) [pk]
  }
}

Table Image {
  id Bytes [pk]
  imageUrl String [not null]
  LaptopModelOnImage LaptopModelOnImage [not null]
}

Table Comment {
  id Bytes [pk]
  laptopModelId Bytes [not null]
  accountId Bytes [not null]
  parentId Bytes
  body String [not null]
  LaptopModel LaptopModel [not null]
  Account Account [not null]
  Parent Comment
  Replies Comment [not null]
}

Table Chat {
  id Bytes [pk]
  senderId Bytes [not null]
  receiverId Bytes [not null]
  message String [not null]
  createAt DateTime [default: `now()`, not null]
  Sender Account [not null]
  Receiver Account [not null]
}

Enum Role {
  Customer
  Admin
}

Enum Color {
  Red
  Blue
  Green
  Black
  White
  Silver
  Gold
}

Enum PaymentType {
  VNPay
  Momo
  ZaloPay
  CashOnDelivery
}

Enum PaymentStatus {
  Pending
  Success
  Failed
}

Enum OrderStatus {
  Pending
  Shipped
  Delivered
  Cancelled
}

Enum LaptopStatus {
  Available
  SoldOut
  Maintenance
}

Ref: Customer.accountId - Account.id

Ref: Admin.accountId - Account.id

Ref: Laptop.modelId > LaptopModel.id

Ref: Order.customerId > Customer.accountId

Ref: OrderDetail.orderId > Order.id

Ref: Payment.orderId - Order.id

Ref: Payment.customerId > Customer.accountId

Ref: Payment.paymentMethodId > PaymentMethod.id

Ref: LaptopModelOnImage.laptopModelId > LaptopModel.id

Ref: LaptopModelOnImage.imageId > Image.id

Ref: Comment.laptopModelId > LaptopModel.id

Ref: Comment.accountId > Account.id

Ref: Comment.parentId > Comment.id

Ref: Chat.senderId > Account.id

Ref: Chat.receiverId > Account.id
